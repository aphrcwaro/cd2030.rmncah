% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/7_private_urban.R
\name{prepare_private_sector_plot_data}
\alias{prepare_private_sector_plot_data}
\title{Prepare Private Sector Plot Data}
\usage{
prepare_private_sector_plot_data(.data, csection_data)
}
\arguments{
\item{.data}{A data frame of class \code{"cd_private_sector_data"} returned by
\code{\link[=load_private_sector_data]{load_private_sector_data()}}. Must include \code{share_csection}, \code{r_raw}, and \code{sector} columns.}

\item{csection_data}{A data frame of class \code{"cd_csection_estimates"} returned by
\code{\link[=load_csection_estimates]{load_csection_estimates()}}. Must match the level of \code{.data} (\code{"national"} or \code{"area"}).}
}
\value{
A tibble of class \code{"cd_private_sector_plot_data"} with attributes:
\itemize{
\item \code{level}: \code{"national"} or \code{"area"}
\item Columns reshaped from wide to include \code{r_raw_Public}, \code{r_raw_Private}, etc.
\item Computed columns:
\itemize{
\item \code{privateShare}: percent share of private sector
\item \code{totalPrevalence}: total prevalence (public + private)
}
}
}
\description{
Processes reshaped private sector data and c-section correction estimates
to produce a tidy dataset for plotting public/private sector shares.
}
\details{
This function:
\itemize{
\item Joins private sector data with correction estimates using \code{iso}, \code{year}, and \code{indic}.
\item For \code{"csection"} rows, applies adjustment: \code{r_raw = estimate * share_csection}.
\item Drops intermediate columns and reshapes data to wide format.
\item Calculates private sector share and total prevalence.
}

Used as input to \code{\link[=plot.cd_private_sector_plot_data]{plot.cd_private_sector_plot_data()}} for visualisation.
}
\examples{
\dontrun{
dt <- load_private_sector_data("National estimates.dta", country_iso = "KEN", level = "national")
cs <- load_csection_estimates("csection_national.dta", country_iso = "KEN", level = "national")
plot_data <- prepare_private_sector_plot_data(dt, cs)
}

}
